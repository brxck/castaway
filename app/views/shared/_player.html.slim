// Make player persistent across navigation
.navbar.is-fixed-bottom.is-white.has-shadow#player(data-turbolinks-permanent)
  audio(data-target="player.audio", src=last_audio_url)

  .level.is-mobile
    .level-left#mobile-player
      a.level-item(data-target="player.artLink" href=last_episode_path)
        img#playing-art(data-target="player.art" src=last_art_url)
        .art-placeholder
          = mdi_tag("headphones 36px")
        .player-loading(data-target="player.loading")
          .button.is-link.is-loading.is-large.is-rounded

      .level-item#player-controls
        .field.has-addons
        
          .control
            button.button.is-large(data-action="player#seekBack")
              div(style="transform: rotate(-90deg)") ↺
          
          .control
            button.button.is-large(data-target="player.toggle" data-action="player#togglePlay")
              span.icon.is-medium.is-marginless#play-icon
                = mdi_tag("play 36px")
              span.icon.is-medium.is-marginless.hidden#pause-icon
                = mdi_tag("pause 36px")

          .control
            button.button.is-large(data-action="player#seekForward")
              div(style="transform: rotate(90deg)") ↻

    .level-item.is-hidden-mobile
      #player-center.has-text-centered
        p.player-info.is-size-6
          a(data-target="player.episode" href=last_episode_path)
            | #{try_last("episode_title") || "Do you hear that?"}

        p.player-info
          a(data-target="player.podcast" href=last_podcast_path)
            | #{try_last("podcast_name") || "Me neither."}

        input.slider.is-fullwidth#scrub(type="range"
              data-target="player.scrub"
              data-action="click->player#setPosition"
              min="0"
              max="1"
              value="0"
              step="0.001")

        p.player-time (data-target="player.time") 0:00 / 0:00

    .level-right.is-hidden-touch
      .level-item
        .select.is-rounded.is-small
          select(type="text"
                data-target="player.speed"
                data-action="player#setSpeed")
            option(value="0.5") x0.5
            option(value="0.75") x0.75
            option(value="1" selected) x1.0
            option(value="1.25") x1.25
            option(value="1.5") x1.5

      .level-item
        span.icon
          = mdi_tag("volume-high 24px")
        input.slider(type="range"
              data-target="player.volume"
              data-action="player#setVolume"
              min="0"
              max="1"
              step="0.01"
              value="1")
